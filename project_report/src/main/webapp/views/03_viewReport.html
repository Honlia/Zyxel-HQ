<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"> <!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
	<meta charset="utf-8" />
	<title>项目报备查看</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />	<meta content="" name="description" />	<meta content="" name="author" />
	<!-- csrf token -->
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <!-- csrf header default header name is X-CSRF-TOKEN -->
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
	
	<!-- BEGIN GLOBAL MANDATORY STYLES -->	<meta http-equiv="pragma" content="no-cache" />      <meta http-equiv="cache-control" content="no-cache, must-revalidate" />      <meta http-equiv="expires" content="0" />     	<!-- BEGIN GLOBAL MANDATORY STYLES -->	<link href="media/css/bootstrap.min.css" th:href="@{/media/css/bootstrap.min.css}" rel="stylesheet" type="text/css"/>	<link href="media/css/bootstrap-modal.css" th:href="@{/media/css/bootstrap-modal.css}" rel="stylesheet" type="text/css"/>	<link href="media/css/bootstrap-responsive.min.css" th:href="@{/media/css/bootstrap-responsive.min.css}" rel="stylesheet" type="text/css"/>	<link href="media/css/font-awesome.min.css" th:href="@{/media/css/font-awesome.min.css}" rel="stylesheet" type="text/css"/>	<link href="media/css/style-metro.css" th:href="@{/media/css/style-metro.css}" rel="stylesheet" type="text/css"/>	<link href="media/css/style.css" th:href="@{/media/css/style.css}" rel="stylesheet" type="text/css"/>	<link href="media/css/style-responsive.css" th:href="@{/media/css/style-responsive.css}" rel="stylesheet" type="text/css"/>	<link href="media/css/default.css" th:href="@{/media/css/default.css}" rel="stylesheet" type="text/css" id="style_color"/>	<link href="media/css/uniform.default.css" th:href="@{/media/css/uniform.default.css}" rel="stylesheet" type="text/css"/>	<!-- END GLOBAL MANDATORY STYLES -->	<link rel="shortcut icon" href="media/image/favicon.ico" th:href="@{/media/image/favicon.ico}" />
</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<body class="page-header-fixed">	<!-- BEGIN HEADER -->    <div th:replace="00_header :: page-header-top"></div>
	<!-- END HEADER -->	<!-- BEGIN CONTAINER -->   	<div class="page-container row-fluid">		<!-- BEGIN SIDEBAR -->        <div th:replace="00_sidebar :: page-sidebar"></div>
		<!-- END SIDEBAR -->
		<!-- BEGIN PAGE -->
		<div class="page-content">
			<!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
			<div id="portlet-config" class="modal hide">
				<div class="modal-header">
					<button data-dismiss="modal" class="close" type="button"></button>
					<h3>portlet Settings</h3>
				</div>
				<div class="modal-body">
					<p>Here will be a configuration form</p>
				</div>
			</div>
			<!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
			<!-- BEGIN PAGE CONTAINER-->
			<div class="container-fluid">
				<!-- BEGIN PAGE HEADER-->
				<div class="row-fluid">
					<div class="span12">
						<!-- BEGIN PAGE TITLE & BREADCRUMB-->
						<h3 class="page-title">
							项目报备查看 <small></small>
						</h3>
						<!-- <ul class="breadcrumb">
							<li>
								<i class="icon-home"></i>
								<a href="05_task.html">首页</a> 
								<i class="icon-angle-right"></i>
							</li>
							<li>
								<a href="#">项目报备管理</a>
								<i class="icon-angle-right"></i>
							</li>
							<li><a href="#">项目报备查看</a></li>
						</ul> -->
						<!-- END PAGE TITLE & BREADCRUMB-->
					</div>
				</div>
				<!-- END PAGE HEADER-->
				<!-- BEGIN PAGE CONTENT-->
				<div class="row-fluid">					<div class="span12">						<div class="portlet box blue">							<div class="portlet-title">								<div class="caption"><i class="icon-reorder"></i>项目报备查看</div>								<div class="tools">									<a href="javascript:;" class="collapse"></a>								</div>							</div>							<div class="portlet-body form">								<!-- BEGIN FORM-->								<form action="#" th:action="@{/searchReport}" th:object="${projectSearchCommand}" method="post" class="horizontal-form">									<div class="row-fluid">										<div class="control-group span4">											<label class="control-label" for="dept">业务部门</label>											<div class="controls">												<select th:field="*{dept}" class="span12 m-wrap" th:disabled="${session.uvo.position=='1' or session.uvo.position=='3'}">													<option value="">全部</option>													<option th:each="item:${depts}" th:value="${item.key}" th:text="${item.value}">业务一部</option>												</select>
												<input type="hidden" th:field="*{dept}" th:if="${session.uvo.position=='1' or session.uvo.position=='3'}"/>											</div>										</div>
                                        <div class="control-group span4">
                                            <label class="control-label" for="projectName">项目编号</label>
                                            <div class="controls">
                                                <input th:field="*{projectNumber}" type="text" class="span12 m-wrap" />
                                            </div>
                                        </div>
										<div class="control-group span4">											<label class="control-label" for="projectName">项目名称</label>											<div class="controls">												<input th:field="*{projectName}" type="text" class="span12 m-wrap" />											</div>										</div>									</div>																		<div class="row-fluid">
									
									   <div class="control-group span4">
                                            <label class="control-label" for="salesName">业务员</label>
                                            <div class="controls">
                                                <input th:field="*{salesName}" type="text" th:readonly="${session.uvo.position=='1'}" class="span12 m-wrap" />
                                            </div>
                                        </div>
																			<div class="control-group span4">											<label class="control-label" for="cooperativePartner">代理商</label>											<div class="controls">																							<select th:field="*{cooperativePartner}" class="span12 m-wrap">													<option value="">全部</option>
													<option th:each="item:${agentNames}" th:value="${item.key}" th:text="${item.value}"></option>												</select>											</div>										</div>
										                                      
                                        <!-- <div class="control-group span4">
                                            <label class="control-label" for="status">状态</label>
                                            <div class="controls">                                          
                                                <select th:field="*{status}" class="span12 m-wrap" >
                                                    <option value="">全部</option>
                                                    <option th:each="item:${projectStatusNames}" th:value="${item.key}" th:text="${item.value}">执行订单</option>
                                                </select>
                                            </div>
                                        </div> -->									</div>
									
									<div class="row-fluid">
									   <div class="control-group span4">
                                            <label class="control-label" for="productLine">产品线</label>
                                            <div class="controls">                                          
                                                <select th:field="*{productLine}" class="span12 m-wrap">
                                                    <option value="">全部</option>
                                                    <option th:each="item : ${productLineList}" th:value="${item}" th:text="${item}"></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="control-group span4">
                                            <label class="control-label" for="productType">产品类型</label>
                                            <div class="controls">                                          
                                                <select th:field="*{productType}" class="span12 m-wrap">
                                                    <option value="">全部</option>
                                                    <option th:each="item : ${productTypeList}" th:value="${item}" th:text="${item}"></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="control-group span4">
                                            <label class="control-label" for="productModel">产品型号</label>
                                            <div class="controls">                                          
                                                <select th:field="*{productModel}" class="span12 m-wrap">
                                                    <option value="">全部</option>
                                                    <option th:each="item : ${productModelList}" th:value="${item}" th:text="${item}"></option>
                                                </select>
                                            </div>
                                        </div>
									</div>
									
									<div class="row-fluid">
									<div class="control-group span8">									<div class="row-fluid">										<div class="control-group span12">											<label class="control-label" for="expectedShipmentTimeFrom">预计出货时间</label>										    <div class="controls">												<div class="input-append date" data-date-format="yyyy-mm-dd">													<input th:field="*{expectedShipmentTimeFrom}" class="dapn12 m-wrap m-ctrl-medium" readonly="readonly" size="16" type="text" value="" />													<span class="add-on"><i class="icon-remove"></i></span>													<span class="add-on"><i class="icon-calendar"></i></span>												</div>												<span class="help-inline">~</span>												<div class="input-append date" data-date-format="yyyy-mm-dd">													<input th:field="*{expectedShipmentTimeTo}" class="dapn12 m-wrap m-ctrl-medium" readonly="readonly" size="16" type="text" value="" />													<span class="add-on"><i class="icon-remove"></i></span>													<span class="add-on"><i class="icon-calendar"></i></span>												</div>											</div>										</div>									</div>
									<div class="row-fluid">										<div class="control-group span12">											<label class="control-label" for="applyTimeFrom">项目申请时间</label>										    <div class="controls">												<div class="input-append date" data-date-format="yyyy-mm-dd">													<input th:field="*{applyTimeFrom}" class="dapn12 m-wrap m-ctrl-medium" readonly="readonly" size="16" type="text" value="" />													<span class="add-on"><i class="icon-remove"></i></span>													<span class="add-on"><i class="icon-calendar"></i></span>												</div>												<span class="help-inline">~</span>												<div class="input-append date" data-date-format="yyyy-mm-dd">													<input th:field="*{applyTimeTo}" class="dapn12 m-wrap m-ctrl-medium" readonly="readonly" size="16" type="text" value="" />													<span class="add-on"><i class="icon-remove"></i></span>													<span class="add-on"><i class="icon-calendar"></i></span>												</div>											</div>										</div>									</div>
									<div class="row-fluid">
									   <div class="control-group span12">
									       <label class="control-label" for="pageSize">每页显示条数</label>
                                           <div class="controls">                                          
                                               <select th:field="*{pageSize}" class="span5 m-wrap">
                                                   <option value="20">20</option>
                                                   <option value="50" selected="selected">50</option>
                                                   <option value="100">100</option>
                                                   <option value="200">200</option>
                                               </select>
                                           </div>
									   </div>
									</div>
									
									</div>
									<div class="control-group span4">
										<div class="row-fluid">
	                                        <div class="control-group span4">
	                                            <label class="control-label" for="status">状态</label>
	                                            <div class="controls">                                          
	                                                <select th:field="*{status}" class="span12 m-wrap" multiple="multiple" size="10" style="width: 250px;">
	                                                    <option value="">全部</option>
	                                                    <option th:each="item:${projectStatusNames}" th:value="${item.key}" th:text="${item.value}">执行订单</option>
	                                                </select>
	                                            </div>
	                                        </div>
										</div>
									</div>
									
									
									</div>									<div class="form-actions">									    <div class="pull-right">
											<button type="submit" name="search" class="btn blue">查询</button>											<button type="submit" name="export" class="btn yellow">Excel 导出</button>										</div>									</div>								</form>								<!-- END FORM-->							</div>						</div>
					</div>
				</div>								<div class="row-fluid">				    <div class="span12">										<div class="portlet box green">							<div class="portlet-title">								<div class="caption"><i class="icon-table"></i>报备项目一览</div>								<div class="caption" style="position:absolute; right: 80px;" th:if="${page != null and page.result != null}" 								    th:inline="text">总共 [[${page.totalCount}]] 条记录, 共 [[${page.totalPages}]] 页, 当前所在第 [[${page.pageNo}]] 页</div>								<div class="tools">									<a href="javascript:;" class="collapse"></a>								</div>							</div>							<div class="portlet-body" th:if="${page != null and page.result != null}">								<table class="table table-condensed table-hover" style="word-wrap:break-word">									<thead>										<tr>											<th>No.</th>											<th>项目编号</th>											<th>项目名称</th>
											<th>业务部门</th>
											<th>代理商</th>
											<th>申请人</th>											<th>申请时间</th>											<th>出货时间</th>											<th>状态</th>										</tr>									</thead>									<tbody>										<tr th:each="row,rowStat:${page.result}">											<td><span th:text="${rowStat.index+1}">1</span></td>											<td><a th:href="@{/editReport/{businessKey}(instanceId=${row.workflowInfo.instanceId},taskId=${row.workflowInfo.taskId},businessKey=${row.project.id})}" th:text="${row.project.projectNumber}">PM0000000001</a></td>											<td th:text="${row.project.projectName}">测试机销售</td>											<td th:text="${depts[row.project.dept]}">业务一部</td>
											<td th:text="${agentNames[row.project.cooperativePartner]}">测试机销售</td>
											
											<td th:text="${row.project.applyUser}">张三</td>											<td th:text="${#dates.format(row.project.applyTime,'yyyy/MM/dd')}">2015-12-12</td>											<td th:text="${row.project.expectedShipmentTime==null ? '未录入' : #dates.format(row.project.expectedShipmentTime,'yyyy/MM/dd')}">2015-12-12</td>											<td><span class="label label-info" 												     th:if="${row.project.status=='A1' or row.project.status=='B1' or row.project.status=='C1' or row.project.status=='D1'}"												     th:text="${projectStatusNames[row.project.status]}">申请中</span>											     <span class="label label-success" 	                                                 th:if="${row.project.status=='B2' or row.project.status=='C2' or row.project.status=='D2' or row.project.status=='D3' or row.project.status=='E1' or row.project.status=='E2' or row.project.status=='E3' or row.project.status=='E4' or row.project.status=='E5' or row.project.status=='E6'}" 	                                                 th:text="${projectStatusNames[row.project.status]}">已报备</span>											     <span class="label label-important" 	                                                 th:if="${row.project.status=='E4' or row.project.status=='E5'}" 	                                                 th:text="${projectStatusNames[row.project.status]}">丢标结案</span>                                                 <span class="label label-warning" 	                                                 th:if="${row.project.status=='B3' or row.project.status=='C3' or row.project.status=='D4' or row.project.status=='D5' or row.project.status=='D6'}"	                                                 th:text="${projectStatusNames[row.project.status]}">被驳回</span>											</td>										</tr>										<tr th:remove="all">											<td>2</td>											<td><a href="04_detailReport.html">PM0000000002</a></td>											<td>测试机销售</td>											<td>张三</td>											<td>2015-12-12</td>											<td><span class="label label-success">已报备</span></td>										</tr>										<tr th:remove="all">											<td>3</td>											<td><a href="04_detailReport.html">PM0000000003</a></td>											<td>测试机销售</td>											<td>张三</td>											<td>2015-12-12</td>											<td><span class="label label-warning">被驳回</span></td>										</tr>									</tbody>								</table>																<div class="pagination pull-right">									<ul>										<!-- 前一页 -->										<!-- 没有前一页时,不可点击 -->										<li th:if="${!page.hasPre}" class="disabled"><span>«</span></li>										<li th:if="${page.hasPre}"><a href="#" th:href="@{/searchReport?search(pageNo=${page.prePage})}">«</a></li>                                                                    <!-- 中间页码区域 -->										<li th:each="item:${page.directLinkPages}" th:class="${curPageNo == item}?'active'">										  <a th:if="${curPageNo != item}" href="#" th:href="@{/searchReport?search(pageNo=${item})}" th:text="${item}">1</a>										  <!-- 当前页,不可点击 -->										  <span th:if="${curPageNo == item}" th:text="${item}"></span>										</li>                                        <!-- 后一页 -->                                        <!-- 没有后一页时,不可点击 -->										<li th:if="${!page.hasNext}" class="disabled"><span>»</span></li>										<li th:if="${page.hasNext}"><a href="#" th:href="@{/searchReport?search(pageNo=${page.nextPage})}">»</a></li>									</ul>								</div>							</div>						</div>					</div>								</div>
				<!-- END PAGE CONTENT-->
			</div>
			<!-- END PAGE CONTAINER--> 
		</div>
		<!-- END PAGE -->    
	</div>
	<!-- END CONTAINER -->
	<!-- BEGIN FOOTER -->    <div th:replace="00_footer :: page-footer"></div>
	<!-- END FOOTER -->
	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->	<!-- BEGIN CORE PLUGINS -->	<script src="media/js/jquery-1.10.1.min.js" th:src="@{/media/js/jquery-1.10.1.min.js}" type="text/javascript"></script>	<script src="media/js/jquery-migrate-1.2.1.min.js" th:src="@{/media/js/jquery-migrate-1.2.1.min.js}" type="text/javascript"></script>	<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->	<script src="media/js/jquery-ui-1.10.1.custom.min.js" th:src="@{/media/js/jquery-ui-1.10.1.custom.min.js}" type="text/javascript"></script>      	<script src="media/js/bootstrap.min.js" th:src="@{/media/js/bootstrap.min.js}" type="text/javascript"></script>	<!--[if lt IE 9]>	<script src="media/js/excanvas.min.js" th:src="@{/media/js/excanvas.min.js}"></script>	<script src="media/js/respond.min.js" th:src="@{/media/js/respond.min.js}"></script>  	<![endif]-->   	<script src="media/js/jquery.slimscroll.min.js" th:src="@{/media/js/jquery.slimscroll.min.js}" type="text/javascript"></script>	<script src="media/js/jquery.blockui.min.js" th:src="@{/media/js/jquery.blockui.min.js}" type="text/javascript"></script>  	<script src="media/js/jquery.cookie.min.js" th:src="@{/media/js/jquery.cookie.min.js}" type="text/javascript"></script>	<script src="media/js/jquery.uniform.min.js" th:src="@{/media/js/jquery.uniform.min.js}" type="text/javascript" ></script>	<!-- END CORE PLUGINS -->	<!-- BEGIN PAGE LEVEL PLUGINS -->	<script type="text/javascript" src="media/js/ckeditor.js" th:src="@{/media/js/ckeditor.js}"></script>  	<script type="text/javascript" src="media/js/bootstrap-fileupload.js" th:src="@{/media/js/bootstrap-fileupload.js}"></script>	<script type="text/javascript" src="media/js/chosen.jquery.min.js" th:src="@{/media/js/chosen.jquery.min.js}"></script>	<script type="text/javascript" src="media/js/select2.min.js" th:src="@{/media/js/select2.min.js}"></script>	<script type="text/javascript" src="media/js/wysihtml5-0.3.0.js" th:src="@{/media/js/wysihtml5-0.3.0.js}"></script> 	<script type="text/javascript" src="media/js/bootstrap-wysihtml5.js" th:src="@{/media/js/bootstrap-wysihtml5.js}"></script>	<script type="text/javascript" src="media/js/jquery.tagsinput.min.js" th:src="@{/media/js/jquery.tagsinput.min.js}"></script>	<script type="text/javascript" src="media/js/jquery.toggle.buttons.js" th:src="@{/media/js/jquery.toggle.buttons.js}"></script>	<script type="text/javascript" src="media/js/bootstrap-datepicker.js" th:src="@{/media/js/bootstrap-datepicker.js}"></script>	<script type="text/javascript" src="media/js/bootstrap-datetimepicker.js" th:src="@{/media/js/bootstrap-datetimepicker.js}"></script>	<script type="text/javascript" src="media/js/clockface.js" th:src="@{/media/js/clockface.js}"></script>	<script type="text/javascript" src="media/js/date.js" th:src="@{/media/js/date.js}"></script>	<script type="text/javascript" src="media/js/daterangepicker.js" th:src="@{/media/js/daterangepicker.js}"></script> 	<script type="text/javascript" src="media/js/bootstrap-colorpicker.js" th:src="@{/media/js/bootstrap-colorpicker.js}"></script>  	<script type="text/javascript" src="media/js/bootstrap-timepicker.js" th:src="@{/media/js/bootstrap-timepicker.js}"></script>	<script type="text/javascript" src="media/js/jquery.inputmask.bundle.min.js" th:src="@{/media/js/jquery.inputmask.bundle.min.js}"></script>   	<script type="text/javascript" src="media/js/jquery.input-ip-address-control-1.0.min.js" th:src="@{/media/js/jquery.input-ip-address-control-1.0.min.js}"></script>	<script type="text/javascript" src="media/js/jquery.multi-select.js" th:src="@{/media/js/jquery.multi-select.js}"></script>   	<script src="media/js/bootstrap-modal.js" th:src="@{/media/js/bootstrap-modal.js}" type="text/javascript" ></script>	<script src="media/js/bootstrap-modalmanager.js" th:src="@{/media/js/bootstrap-modalmanager.js}" type="text/javascript" ></script>	<!-- END PAGE LEVEL PLUGINS -->	<!-- BEGIN PAGE LEVEL SCRIPTS -->	<script src="media/js/app.js" th:src="@{/media/js/app.js}"></script>	<script src="media/js/form-components.js" th:src="@{/media/js/form-components.js}"></script>	<script src="media/js/table-editable.js" th:src="@{/media/js/table-editable.js}"></script>    	<!-- END PAGE LEVEL SCRIPTS -->    <script type="text/javascript" th:inline="javascript">    /*<![CDATA[*/         $(function() {
            var token = $("meta[name='_csrf']").attr("content");
            var header = $("meta[name='_csrf_header']").attr("content");
            $(document).ajaxSend(function(e, xhr, options) {
                xhr.setRequestHeader(header, token);
            });
        });
		jQuery(document).ready(function() {       		   // initiate layout and plugins		   App.init();		   FormComponents.init();		   		   $(".input-append.date").datetimepicker({				minView: "month", //选择日期后，不会再跳转去选择时分秒 				format: "yyyy-mm-dd", //选择日期后，文本框显示的日期格式 				language: 'zh-CN', //汉化 				autoclose:true //选择日期后自动关闭 		    });
		   
           // 下拉列表联动控制
           var clearCombox = function(combox){
               combox.empty();
               combox.append("<option value=''>全部</option>");
           };
          
           $("#productLine").change(function(){
        	   var data = {};
               data["productLine"] = $("#productLine").val();
               $.ajax({
                   type : "post",
                   contentType : "application/json;charset=utf-8",
                   url : /*[[@{/populateProductTypeList}]]*/,
                   data : JSON.stringify(data),
                   dataType : 'json',
                   timeout : 100000,
                   success : function(data) {
                       console.log("SUCCESS: ", data);
                       clearCombox($("#productType"));
                       for(var i=0;i<data.length;i++){
                           $("#productType").append("<option value='"+data[i]+"'>"+data[i]+"</option>");
                       }
                   },
                   error : function(e) {
                       console.log("ERROR: ", e);
                   },
                   done : function(e) {
                       console.log("DONE");
                   }
               });
           });

           $("#productType").change(function(){
              var data = {};
              data["productLine"] = $("#productLine").val();
              data["productType"] = $("#productType").val();
              $.ajax({
                  type : "post",
                  contentType : "application/json;charset=utf-8",
                  url : /*[[@{/populateProductModelList}]]*/,
                  data : JSON.stringify(data),
                  dataType : 'json',
                  timeout : 100000,
                  success : function(data) {
                      console.log("SUCCESS: ", data);
                      clearCombox($("#productModel"));
                      for(var i=0;i<data.length;i++){
                    	  $("#productModel").append("<option value='"+data[i]+"'>"+data[i]+"</option>");
                      }
                  },
                  error : function(e) {
                      console.log("ERROR: ", e);
                  },
                  done : function(e) {
                      console.log("DONE");
                  }
              });
           });

		});	    /*]]>*/	</script>
	<!-- END JAVASCRIPTS -->
	</body>
<!-- END BODY -->
</html>